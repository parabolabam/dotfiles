[
[4,"js_body_filter","Sets an njs function as a response body filter. The filter function is called for each data chunk of a response body with the following arguments:","<p>Sets an njs function as a response body filter. The filter function is called for each data chunk of a response body with the following arguments:</p><dl class=\"compact\"><dt><code>r</code></dt><dd>the <a href=\"https://nginx.org/en/docs/njs/reference.html#http\">HTTP request</a> object</dd><dt><code>data</code></dt><dd>the incoming data chunk, may be a string or Buffer depending on the <code>buffer_type</code> value, by default is a string.</dd><dt><code>flags</code></dt><dd>an object with the following properties:<dl class=\"compact\"><dt><code>last</code></dt><dd>a boolean value, true if data is a last buffer.</dd></dl></dd></dl><p>The filter function can pass its own modified version of the input data chunk to the next body filter by calling <a href=\"https://nginx.org/en/docs/njs/reference.html#r_sendbuffer\"><code>r.sendBuffer()</code></a>. For example, to transform all the lowercase letters in the response body:</p><blockquote class=\"example\"><pre>function filter(r, data, flags) {\n    r.sendBuffer(data.toLowerCase(), flags);\n}\n</pre></blockquote><p>To stop filtering (following data chunks will be passed to client without calling <code>js_body_filter</code>), <a href=\"https://nginx.org/en/docs/njs/reference.html#r_done\"><code>r.done()</code></a> can be used.</p><p>If the filter function changes the length of the response body, then it is required to clear out the “Content-Length” response header (if any) in <a href=\"https://nginx.org/en/docs/http/ngx_http_js_module.html#js_header_filter\"><code>js_header_filter</code></a> to enforce chunked transfer encoding.</p><blockquote class=\"note\">As the <code>js_body_filter</code> handler returns its result immediately, it supports only synchronous operations. Thus, asynchronous operations such as <a href=\"https://nginx.org/en/docs/njs/reference.html#r_subrequest\">r.subrequest()</a> or <a href=\"https://nginx.org/en/docs/njs/reference.html#settimeout\">setTimeout()</a> are not supported.</blockquote>",["As the `js_body_filter` handler returns its result immediately, it supports only synchronous operations. Thus, asynchronous operations such as [r.subrequest()](../njs/reference.html#r_subrequest) or [setTimeout()](../njs/reference.html#settimeout) are not supported."],"<table ><tbody><tr><th>Syntax:</th><td><code><strong>js_body_filter</strong> <code><i>function</i></code> | <code><i>module.function</i></code> [<code><i>buffer_type</i></code>=<code><i>string</i></code> | <code><i>buffer</i></code>];</code><br></td></tr><tr><th>Default:</th><td>—</td></tr><tr><th>Context:</th><td><code>location</code>, <code>limit_except</code><br></td></tr></tbody></table><p>This directive appeared in version 0.5.2.</p>"],
[4,"js_content","Sets an njs function as a location content handler. Since [0.4.0](../njs/changes.html#njs0.4.0), a module function can be referenced.","<p>Sets an njs function as a location content handler. Since <a href=\"https://nginx.org/en/docs/njs/changes.html#njs0.4.0\">0.4.0</a>, a module function can be referenced.</p>",[],"<table ><tbody><tr><th>Syntax:</th><td><code><strong>js_content</strong> <code><i>function</i></code> | <code><i>module.function</i></code>;</code><br></td></tr><tr><th>Default:</th><td>—</td></tr><tr><th>Context:</th><td><code>location</code>, <code>limit_except</code><br></td></tr></tbody></table>"],
[4,"js_fetch_ciphers","Specifies the enabled ciphers for HTTPS requests with [Fetch API](../njs/reference.html#ngx_fetch). The ciphers are specified in the format understood by the OpenSSL library.","<p>Specifies the enabled ciphers for HTTPS requests with <a href=\"https://nginx.org/en/docs/njs/reference.html#ngx_fetch\">Fetch API</a>. The ciphers are specified in the format understood by the OpenSSL library.</p><p>The full list can be viewed using the “<code>openssl ciphers</code>” command.</p>",[],"<table ><tbody><tr><th>Syntax:</th><td><code><strong>js_fetch_ciphers</strong> <code><i>ciphers</i></code>;</code><br></td></tr><tr><th>Default:</th><td><pre>js_fetch_ciphers HIGH:!aNULL:!MD5;</pre></td></tr><tr><th>Context:</th><td><code>http</code>, <code>server</code>, <code>location</code><br></td></tr></tbody></table><p>This directive appeared in version 0.7.0.</p>"],
[4,"js_fetch_protocols","Enables the specified protocols for HTTPS requests with [Fetch API](../njs/reference.html#ngx_fetch).","<p>Enables the specified protocols for HTTPS requests with <a href=\"https://nginx.org/en/docs/njs/reference.html#ngx_fetch\">Fetch API</a>.</p>",[],"<table ><tbody><tr><th>Syntax:</th><td><code><strong>js_fetch_protocols</strong> [<code>TLSv1</code>] [<code>TLSv1.1</code>] [<code>TLSv1.2</code>] [<code>TLSv1.3</code>];</code><br></td></tr><tr><th>Default:</th><td><pre>js_fetch_protocols TLSv1 TLSv1.1 TLSv1.2;</pre></td></tr><tr><th>Context:</th><td><code>http</code>, <code>server</code>, <code>location</code><br></td></tr></tbody></table><p>This directive appeared in version 0.7.0.</p>"],
[4,"js_fetch_trusted_certificate","Specifies a `_file_` with trusted CA certificates in the PEM format used to [verify](../njs/reference.html#fetch_verify) the HTTPS certificate with [Fetch API](../njs/reference.html#ngx_fetch).","<p>Specifies a <code><i>file</i></code> with trusted CA certificates in the PEM format used to <a href=\"https://nginx.org/en/docs/njs/reference.html#fetch_verify\">verify</a> the HTTPS certificate with <a href=\"https://nginx.org/en/docs/njs/reference.html#ngx_fetch\">Fetch API</a>.</p>",[],"<table ><tbody><tr><th>Syntax:</th><td><code><strong>js_fetch_trusted_certificate</strong> <code><i>file</i></code>;</code><br></td></tr><tr><th>Default:</th><td>—</td></tr><tr><th>Context:</th><td><code>http</code>, <code>server</code>, <code>location</code><br></td></tr></tbody></table><p>This directive appeared in version 0.7.0.</p>"],
[4,"js_fetch_verify_depth","Sets the verification depth in the HTTPS server certificates chain with [Fetch API](../njs/reference.html#ngx_fetch).","<p>Sets the verification depth in the HTTPS server certificates chain with <a href=\"https://nginx.org/en/docs/njs/reference.html#ngx_fetch\">Fetch API</a>.</p>",[],"<table ><tbody><tr><th>Syntax:</th><td><code><strong>js_fetch_verify_depth</strong> <code><i>number</i></code>;</code><br></td></tr><tr><th>Default:</th><td><pre>js_fetch_verify_depth 100;</pre></td></tr><tr><th>Context:</th><td><code>http</code>, <code>server</code>, <code>location</code><br></td></tr></tbody></table><p>This directive appeared in version 0.7.0.</p>"],
[4,"js_header_filter","Sets an njs function as a response header filter. The directive allows changing arbitrary header fields of a response header.","<p>Sets an njs function as a response header filter. The directive allows changing arbitrary header fields of a response header.</p><blockquote class=\"note\">As the <code>js_header_filter</code> handler returns its result immediately, it supports only synchronous operations. Thus, asynchronous operations such as <a href=\"https://nginx.org/en/docs/njs/reference.html#r_subrequest\">r.subrequest()</a> or <a href=\"https://nginx.org/en/docs/njs/reference.html#settimeout\">setTimeout()</a> are not supported.</blockquote>",["As the `js_header_filter` handler returns its result immediately, it supports only synchronous operations. Thus, asynchronous operations such as [r.subrequest()](../njs/reference.html#r_subrequest) or [setTimeout()](../njs/reference.html#settimeout) are not supported."],"<table ><tbody><tr><th>Syntax:</th><td><code><strong>js_header_filter</strong> <code><i>function</i></code> | <code><i>module.function</i></code>;</code><br></td></tr><tr><th>Default:</th><td>—</td></tr><tr><th>Context:</th><td><code>location</code>, <code>limit_except</code><br></td></tr></tbody></table><p>This directive appeared in version 0.5.1.</p>"],
[4,"js_import","Imports a module that implements location and variable handlers in njs. The `export_name` is used as a namespace to access module functions. If the `export_name` is not specified, the module name will be used as a namespace.","<p>Imports a module that implements location and variable handlers in njs. The <code>export_name</code> is used as a namespace to access module functions. If the <code>export_name</code> is not specified, the module name will be used as a namespace.</p><blockquote class=\"example\"><pre>js_import http.js;\n</pre></blockquote><p>Here, the module name <code>http</code> is used as a namespace while accessing exports. If the imported module exports <code>foo()</code>, <code>http.foo</code> is used to refer to it.</p><p>Several <code>js_import</code> directives can be specified.</p>",[],"<table ><tbody><tr><th>Syntax:</th><td><code><strong>js_import</strong> <code><i>module.js</i></code> | <code><i>export_name from module.js</i></code>;</code><br></td></tr><tr><th>Default:</th><td>—</td></tr><tr><th>Context:</th><td><code>http</code><br></td></tr></tbody></table><p>This directive appeared in version 0.4.0.</p>"],
[4,"js_include","Specifies a file that implements location and variable handlers in njs:","<p>Specifies a file that implements location and variable handlers in njs:</p><blockquote class=\"example\"><pre>nginx.conf:\njs_include http.js;\nlocation   /version {\n    js_content version;\n}\n\nhttp.js:\nfunction version(r) {\n    r.return(200, njs.version);\n}\n</pre></blockquote><p>The directive is deprecated since <a href=\"https://nginx.org/en/docs/njs/changes.html#njs0.4.0\">0.4.0</a>, the <a href=\"https://nginx.org/en/docs/http/ngx_http_js_module.html#js_import\">js_import</a> directive should be used instead.</p>",[],"<table ><tbody><tr><th>Syntax:</th><td><code><strong>js_include</strong> <code><i>file</i></code>;</code><br></td></tr><tr><th>Default:</th><td>—</td></tr><tr><th>Context:</th><td><code>http</code><br></td></tr></tbody></table>"],
[4,"js_path","Sets an additional path for njs modules.","<p>Sets an additional path for njs modules.</p>",[],"<table ><tbody><tr><th>Syntax:</th><td><code><strong>js_path</strong> <code><i>path</i></code>;</code><br></td></tr><tr><th>Default:</th><td>—</td></tr><tr><th>Context:</th><td><code>http</code><br></td></tr></tbody></table><p>This directive appeared in version 0.3.0.</p>"],
[4,"js_set","Sets an njs `function` for the specified `variable`. Since [0.4.0](../njs/changes.html#njs0.4.0), a module function can be referenced.","<p>Sets an njs <code>function</code> for the specified <code>variable</code>. Since <a href=\"https://nginx.org/en/docs/njs/changes.html#njs0.4.0\">0.4.0</a>, a module function can be referenced.</p><p>The function is called when the variable is referenced for the first time for a given request. The exact moment depends on a <a href=\"https://nginx.org/en/docs/dev/development_guide.html#http_phases\">phase</a> at which the variable is referenced. This can be used to perform some logic not related to variable evaluation. For example, if the variable is referenced only in the <a href=\"https://nginx.org/en/docs/http/ngx_http_log_module.html#log_format\">log_format</a> directive, its handler will not be executed until the log phase. This handler can be used to do some cleanup right before the request is freed.</p><blockquote class=\"note\">As the <code>js_set</code> handler returns its result immediately, it supports only synchronous operations. Thus, asynchronous operations such as <a href=\"https://nginx.org/en/docs/njs/reference.html#r_subrequest\">r.subrequest()</a> or <a href=\"https://nginx.org/en/docs/njs/reference.html#settimeout\">setTimeout()</a> are not supported.</blockquote>",["As the `js_set` handler returns its result immediately, it supports only synchronous operations. Thus, asynchronous operations such as [r.subrequest()](../njs/reference.html#r_subrequest) or [setTimeout()](../njs/reference.html#settimeout) are not supported."],"<table ><tbody><tr><th>Syntax:</th><td><code><strong>js_set</strong> <code><i>$variable</i></code> <code><i>function</i></code> | <code><i>module.function</i></code>;</code><br></td></tr><tr><th>Default:</th><td>—</td></tr><tr><th>Context:</th><td><code>http</code><br></td></tr></tbody></table>"],
[4,"js_var","Declares a [writable](../njs/reference.html#r_variables) variable. The value can contain text, variables, and their combination. The variable is not overwritten after a redirect unlike variables created with the [set](ngx_http_rewrite_module.html#set) directive.","<p>Declares a <a href=\"https://nginx.org/en/docs/njs/reference.html#r_variables\">writable</a> variable. The value can contain text, variables, and their combination. The variable is not overwritten after a redirect unlike variables created with the <a href=\"https://nginx.org/en/docs/http/ngx_http_rewrite_module.html#set\">set</a> directive.</p>",[],"<table ><tbody><tr><th>Syntax:</th><td><code><strong>js_var</strong> <code><i>$variable</i></code> [<code><i>value</i></code>];</code><br></td></tr><tr><th>Default:</th><td>—</td></tr><tr><th>Context:</th><td><code>http</code><br></td></tr></tbody></table><p>This directive appeared in version 0.5.3.</p>"]
]